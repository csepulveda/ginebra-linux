#!/bin/sh
# Montar sistemas virtuales
mount -t proc none /proc
mount -t sysfs none /sys
mount -t tmpfs -o size=16M tmpfs /tmp

# Copiar sistema a RAM
echo "Copiando sistema a RAM..."
cp -a /bin /sbin /etc /lib /usr /tmp/ 2>/dev/null
cp /welcome /tmp/ 2>/dev/null
mkdir -p /tmp/proc /tmp/sys /tmp/dev /tmp/home /tmp/mnt

# Copiar dispositivos
cp -a /dev/* /tmp/dev/

# Pivot a RAM
cd /tmp
mkdir -p oldroot
pivot_root . oldroot

# Remontar sistemas virtuales
mount -t proc none /proc
mount -t sysfs none /sys
mount -t devtmpfs none /dev 2>/dev/null

# Desmontar floppy
umount /oldroot/sys
umount /oldroot/proc
umount /oldroot
rmdir /oldroot

# Cargar m√≥dulos de red
modprobe 8139too

echo "Ginebra Linux corriendo desde RAM"
clear
cat /welcome
cd /home
exec /bin/sh
